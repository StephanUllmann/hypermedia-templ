package templates

import "github.com/StephanUllmann/hypermedia-templ/model"
import "fmt"

templ Rows(contacts []models.Contact, page int) {
  for _, contact := range contacts {
            <tr>
                <td><input type="checkbox" name="selected_contact_ids" value={ fmt.Sprintf("%d",contact.ID) }/></td>
                <td>{ contact.First	 }</td>
                <td>{ contact.Last }</td>
                <td>{ contact.Phone }</td>
                <td>{ contact.Email }</td>
                <td><a href={templ.SafeURL(fmt.Sprintf("/contacts/%v/edit", contact.ID))} >Edit</a>
                    <a href={templ.SafeURL(fmt.Sprintf("/contacts/%v", contact.ID))} >View</a>
                    <a href="#" hx-delete={fmt.Sprintf("/contacts/%v", contact.ID)}
                        hx-confirm="Are you sure you want to delete this contact?"
                        hx-swap="outerHTML swap:1s"
                        hx-target="closest tr">Delete
                        </a>
                </td>
            </tr>
             }
            // Click to Load
            // if len(contacts) == 10 {
            //     <tr>
            //         <td colspan="5" style="text-align: center">
            //             <button hx-target="closest tr"
            //                     hx-swap="outerHTML"
            //                     hx-select="tbody > tr"
            //                     hx-get={fmt.Sprintf("/contacts?page=%d", page + 1)}
            //                     >
            //                 Load More
            //             </button>
            //         </td>
            //     </tr>              
            // }

            // Infinite Scroll
            if len(contacts) == 10 {
                <tr>
                    <td colspan="5" style="text-align: center">
                        <span hx-target="closest tr"
                            hx-trigger="revealed"
                            hx-swap="outerHTML"
                            hx-select="tbody > tr"
                            hx-get={fmt.Sprintf("/contacts?page=%d", page + 1)}>Loading More...</span>
                    </td>
                </tr>
            }
}

// confirmation dialog
// hx-confirm="Are you sure you want to delete this contact?"